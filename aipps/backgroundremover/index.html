<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>å…è´¹ AI æ™ºèƒ½æŠ å›¾ - ä¿æŠ¤éšç§ | Aifura</title>
    <meta name="description" content="æœ€ä½³çš„å…è´¹åœ¨çº¿ AI æŠ å›¾å·¥å…·ã€‚å®Œå…¨åœ¨æµè§ˆå™¨æœ¬åœ°è¿è¡Œï¼Œä¿æŠ¤éšç§ï¼Œæ— éœ€ä¸Šä¼ å›¾ç‰‡ã€‚ä¸€é”®å»åº•ï¼Œæ— é™ä½¿ç”¨ã€‚">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        .checkerboard {
            background-color: #ffffff;
            background-image: linear-gradient(45deg, #e5e7eb 25%, transparent 25%), 
                              linear-gradient(-45deg, #e5e7eb 25%, transparent 25%), 
                              linear-gradient(45deg, transparent 75%, #e5e7eb 75%), 
                              linear-gradient(-45deg, transparent 75%, #e5e7eb 75%);
            background-size: 20px 20px;
            background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
        }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-gradient-to-br from-indigo-50 to-blue-100 min-h-screen flex flex-col text-slate-800">

    <nav class="w-full bg-white/80 backdrop-blur-md border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
            <div class="flex items-center gap-2 cursor-pointer" onclick="window.location.href='/'">
                <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold">A</div>
                <span class="font-bold text-xl tracking-tight text-slate-900">Aifura Tools</span>
            </div>
            <div class="flex items-center gap-4">
                <button id="langToggle" class="text-sm font-semibold text-slate-600 hover:text-blue-600 transition flex items-center gap-1 border border-gray-300 px-3 py-1 rounded-full">
                    ğŸŒ <span id="currentLangLabel">ä¸­æ–‡</span>
                </button>
                <a href="/" class="hidden sm:block bg-slate-900 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-slate-700 transition" data-i18n="moreTools">
                    å‘ç°æ›´å¤š AI åº”ç”¨
                </a>
            </div>
        </div>
    </nav>

    <main class="flex-grow container mx-auto px-4 py-12 max-w-4xl flex flex-col items-center">
        
        <header class="text-center mb-10 fade-in">
            <h1 class="text-4xl sm:text-5xl font-extrabold text-slate-900 mb-4 tracking-tight" data-i18n="title">
                AI æ™ºèƒ½ä¸€é”®æŠ å›¾
            </h1>
            <p class="text-lg text-slate-600 max-w-2xl mx-auto" data-i18n="subtitle">
                å®Œå…¨å…è´¹ã€æ— é™æ¬¡ä½¿ç”¨ã€‚æ‰€æœ‰è®¡ç®—åœ¨æµè§ˆå™¨æœ¬åœ°å®Œæˆï¼Œå›¾ç‰‡ç»ä¸ä¸Šä¼ æœåŠ¡å™¨ï¼Œéšç§ç»å¯¹å®‰å…¨ã€‚
            </p>
            <div class="mt-4 flex flex-wrap justify-center gap-2">
                <span class="px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-semibold" data-i18n="tagPrivacy">ğŸ”’ éšç§ä¿æŠ¤</span>
                <span class="px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-semibold" data-i18n="tagFree">âš¡ å…è´¹æ— é™</span>
                <span class="px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-semibold" data-i18n="tagOffline">ğŸ’» ç¦»çº¿å¯ç”¨</span>
            </div>
        </header>

        <div class="w-full bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden fade-in" style="animation-delay: 0.1s;">
            
            <div class="p-8">
                <div id="uploadArea" class="border-2 border-dashed border-gray-300 rounded-xl bg-slate-50 p-10 text-center cursor-pointer hover:border-blue-500 hover:bg-blue-50 transition duration-300 group">
                    <input type="file" id="fileInput" accept="image/png, image/jpeg, image/jpg, image/webp" class="hidden">
                    <div class="flex flex-col items-center justify-center">
                        <div class="w-16 h-16 bg-white rounded-full shadow-sm flex items-center justify-center mb-4 group-hover:scale-110 transition">
                            <svg class="w-8 h-8 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                        </div>
                        <p class="text-lg font-medium text-slate-700 mb-2 group-hover:text-blue-600 transition" data-i18n="uploadText">ç‚¹å‡»æˆ–æ‹–æ‹½å›¾ç‰‡åˆ°è¿™é‡Œ</p>
                        <p class="text-sm text-slate-400" data-i18n="uploadSub">æ”¯æŒ JPG, PNG, WEBP</p>
                    </div>
                </div>
            </div>

            <div id="controlPanel" class="px-8 pb-8 hidden">
                <div class="flex items-center justify-center mb-6">
                    <img id="previewThumb" src="" class="h-24 w-auto rounded-lg shadow-sm border border-gray-200 object-cover">
                    <div class="ml-4 flex-1">
                        <p class="text-sm font-medium text-slate-900 truncate" id="fileName">image.jpg</p>
                        <p class="text-xs text-slate-500 mb-2" id="fileSize">2.5 MB</p>
                    </div>
                </div>
                <button id="processBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-xl shadow-lg shadow-blue-500/30 transition transform active:scale-95 flex items-center justify-center gap-2">
                    <span data-i18n="btnRemove">å¼€å§‹ä¸€é”®æŠ å›¾</span>
                    <span class="text-xs opacity-75 font-normal" data-i18n="btnCost">(0 æˆæœ¬)</span>
                </button>
                
                <div id="progressContainer" class="mt-4 hidden text-center">
                     <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"></div>
                     <p id="progressText" class="text-sm text-blue-600 font-medium">AI æ­£åœ¨åˆå§‹åŒ–...</p>
                     <p class="text-xs text-slate-400 mt-1" data-i18n="firstTimeHint">é¦–æ¬¡ä½¿ç”¨éœ€è¦ä¸‹è½½ AI æ¨¡å‹ (çº¦80MB)ï¼Œå¯èƒ½éœ€è¦30ç§’ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚</p>
                </div>
            </div>

            <div id="resultArea" class="bg-gray-50 border-t border-gray-100 p-8 hidden flex-col md:flex-row gap-6">
                <div class="flex-1">
                    <p class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-2" data-i18n="labelOriginal">åŸå›¾</p>
                    <div class="rounded-lg overflow-hidden shadow-sm border border-gray-200 bg-white h-64 flex items-center justify-center">
                        <img id="resultOriginal" class="max-h-full max-w-full object-contain">
                    </div>
                </div>
                
                <div class="flex-1">
                    <p class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-2" data-i18n="labelResult">å»åº•ç»“æœ (é€æ˜)</p>
                    <div class="rounded-lg overflow-hidden shadow-sm border border-gray-200 checkerboard h-64 flex items-center justify-center relative group">
                        <img id="resultFinal" class="max-h-full max-w-full object-contain relative z-10">
                    </div>
                    <a id="downloadLink" class="mt-4 block w-full text-center bg-green-500 hover:bg-green-600 text-white font-bold py-2 rounded-lg transition shadow-md shadow-green-500/20" data-i18n="btnDownload">
                        ä¸‹è½½é«˜æ¸…åŸå›¾
                    </a>
                </div>
            </div>

        </div>

        <div class="mt-12 text-center fade-in" style="animation-delay: 0.2s;">
            <h2 class="text-2xl font-bold text-slate-800 mb-3" data-i18n="moreTitle">æƒ³è¦æ›´å¤šç¥å¥‡çš„ AI å·¥å…·ï¼Ÿ</h2>
            <p class="text-slate-600 mb-6 max-w-lg mx-auto" data-i18n="moreDesc">æˆ‘ä»¬æ­£åœ¨æ‰“é€ ä¸€ä¸ªè½»é‡çº§ã€å¥½ç”¨çš„ AI å·¥å…·å¹³å°ã€‚Excel å¤„ç†ã€PDF è½¬æ¢ç­‰ç­‰ã€‚</p>
            <a href="/" class="inline-flex items-center gap-2 bg-slate-900 text-white px-8 py-3 rounded-full font-semibold hover:bg-slate-800 transition shadow-lg hover:shadow-xl transform hover:-translate-y-1">
                <span data-i18n="visitBtn">è®¿é—® Aifura.com é¦–é¡µ</span>
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
            </a>
        </div>

    </main>

    <footer class="mt-auto py-8 text-center text-slate-400 text-sm border-t border-gray-200 bg-white">
        <p>&copy; 2025 Aifura.com. All rights reserved. <span class="hidden sm:inline">|</span> <span data-i18n="footerTag">ç”± Qun ç”¨ â¤ï¸ åˆ¶ä½œ</span></p>
    </footer>

    <script src="imgly-background-removal.min.js"></script>

    <script>
        // ...è¿™é‡Œæ˜¯é€»è¾‘ä»£ç ï¼Œå·²ç»åŒ…å«äº†åŒè¯­æ”¯æŒ...
        const translations = {
            en: {
                title: "AI Background Remover",
                subtitle: "100% Free, Unlimited, and runs entirely in your browser. Your photos never leave your device.",
                tagPrivacy: "ğŸ”’ Privacy First",
                tagFree: "âš¡ Unlimited Free",
                tagOffline: "ğŸ’» Offline Capable",
                uploadText: "Click or Drag image here",
                uploadSub: "Supports JPG, PNG, WEBP",
                moreTools: "Explore More AI Apps",
                btnRemove: "Remove Background Now",
                btnCost: "(0 Cost)",
                firstTimeHint: "First time load may take 30s to download AI model. Please be patient.",
                labelOriginal: "Original",
                labelResult: "Result (Transparent)",
                btnDownload: "Download HD Image",
                moreTitle: "Want more magical AI tools?",
                moreDesc: "We are building a platform of lightweight, useful AI apps. Excel tools, PDF converters, and more.",
                visitBtn: "Visit Aifura.com",
                footerTag: "Made with â¤ï¸ by Qun",
                processing: "AI Processing...",
                downloading: "â¬‡ï¸ Downloading Model...",
                success: "âœ¨ Done!"
            },
            zh: {
                title: "AI æ™ºèƒ½ä¸€é”®æŠ å›¾",
                subtitle: "å®Œå…¨å…è´¹ã€æ— é™æ¬¡ä½¿ç”¨ã€‚æ‰€æœ‰è®¡ç®—åœ¨æµè§ˆå™¨æœ¬åœ°å®Œæˆï¼Œå›¾ç‰‡ç»ä¸ä¸Šä¼ æœåŠ¡å™¨ï¼Œéšç§ç»å¯¹å®‰å…¨ã€‚",
                tagPrivacy: "ğŸ”’ éšç§ä¿æŠ¤",
                tagFree: "âš¡ å…è´¹æ— é™",
                tagOffline: "ğŸ’» ç¦»çº¿å¯ç”¨",
                uploadText: "ç‚¹å‡»æˆ–æ‹–æ‹½å›¾ç‰‡åˆ°è¿™é‡Œ",
                uploadSub: "æ”¯æŒ JPG, PNG, WEBP",
                moreTools: "å‘ç°æ›´å¤š AI åº”ç”¨",
                btnRemove: "å¼€å§‹ä¸€é”®æŠ å›¾",
                btnCost: "(0 æˆæœ¬)",
                firstTimeHint: "é¦–æ¬¡ä½¿ç”¨éœ€è¦ä¸‹è½½ AI æ¨¡å‹ (çº¦80MB)ï¼Œå¯èƒ½éœ€è¦30ç§’ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚",
                labelOriginal: "åŸå›¾",
                labelResult: "å»åº•ç»“æœ (é€æ˜)",
                btnDownload: "ä¸‹è½½é«˜æ¸…åŸå›¾",
                moreTitle: "æƒ³è¦æ›´å¤šç¥å¥‡çš„ AI å·¥å…·ï¼Ÿ",
                moreDesc: "æˆ‘ä»¬æ­£åœ¨æ‰“é€ ä¸€ä¸ªè½»é‡çº§ã€å¥½ç”¨çš„ AI å·¥å…·å¹³å°ã€‚Excel å¤„ç†ã€PDF è½¬æ¢ç­‰ç­‰ã€‚",
                visitBtn: "è®¿é—® Aifura.com",
                footerTag: "ç”± Qun ç”¨ â¤ï¸ åˆ¶ä½œ",
                processing: "AI æ­£åœ¨è®¡ç®—ä¸­...",
                downloading: "â¬‡ï¸ æ­£åœ¨ä¸‹è½½æ¨¡å‹...",
                success: "âœ¨ å¤„ç†å®Œæˆï¼"
            }
        };

        // é»˜è®¤è®¾ç½®ä¸ºä¸­æ–‡
        let currentLang = 'zh';

        function setLanguage(lang) {
            currentLang = lang;
            document.getElementById('currentLangLabel').textContent = lang === 'en' ? 'English' : 'ä¸­æ–‡';
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[lang][key]) {
                    el.textContent = translations[lang][key];
                }
            });
            document.title = lang === 'en' ? "Free AI Background Remover - Privacy First | Aifura" : "å…è´¹ AI æ™ºèƒ½æŠ å›¾ - ä¿æŠ¤éšç§ | Aifura";
        }

        document.getElementById('langToggle').addEventListener('click', () => {
            const newLang = currentLang === 'en' ? 'zh' : 'en';
            setLanguage(newLang);
        });

        // æ ¸å¿ƒé€»è¾‘
        const fileInput = document.getElementById('fileInput');
        const uploadArea = document.getElementById('uploadArea');
        const processBtn = document.getElementById('processBtn');
        const controlPanel = document.getElementById('controlPanel');
        const previewThumb = document.getElementById('previewThumb');
        const fileName = document.getElementById('fileName');
        const fileSize = document.getElementById('fileSize');
        const progressContainer = document.getElementById('progressContainer');
        const progressText = document.getElementById('progressText');
        const resultArea = document.getElementById('resultArea');
        const resultFinal = document.getElementById('resultFinal');
        const resultOriginal = document.getElementById('resultOriginal');
        const downloadLink = document.getElementById('downloadLink');
        let selectedFile = null;

        uploadArea.addEventListener('click', () => fileInput.click());
        uploadArea.addEventListener('dragover', (e) => { e.preventDefault(); uploadArea.classList.add('bg-blue-50'); });
        uploadArea.addEventListener('dragleave', () => uploadArea.classList.remove('bg-blue-50'));
        uploadArea.addEventListener('drop', (e) => { e.preventDefault(); uploadArea.classList.remove('bg-blue-50'); if(e.dataTransfer.files[0]) handleFile(e.dataTransfer.files[0]); });
        fileInput.addEventListener('change', (e) => { if(e.target.files[0]) handleFile(e.target.files[0]); });

        function handleFile(file) {
            selectedFile = file;
            fileName.textContent = file.name;
            fileSize.textContent = (file.size / 1024 / 1024).toFixed(2) + " MB";
            const reader = new FileReader();
            reader.onload = (e) => { previewThumb.src = e.target.result; resultOriginal.src = e.target.result; }
            reader.readAsDataURL(file);
            controlPanel.classList.remove('hidden');
            resultArea.classList.add('hidden');
        }

        processBtn.addEventListener('click', async () => {
            if (!selectedFile) return;
            processBtn.disabled = true;
            processBtn.classList.add('opacity-50', 'cursor-not-allowed');
            progressContainer.classList.remove('hidden');
            
            try {
                // è°ƒç”¨æœ¬åœ° JS åº“
                const blob = await imglyRemoveBackground(selectedFile, {
                    progress: (key, current, total) => {
                         const percent = Math.round((current / total) * 100);
                         if(current !== total) {
                            progressText.textContent = `${translations[currentLang].downloading} (${percent}%)`;
                         } else {
                            progressText.textContent = translations[currentLang].processing;
                         }
                    }
                });
                const url = URL.createObjectURL(blob);
                resultFinal.src = url;
                downloadLink.href = url;
                downloadLink.download = `aifura_cut_${selectedFile.name.split('.')[0]}.png`;
                resultArea.classList.remove('hidden');
                resultArea.classList.add('flex');
                progressText.textContent = translations[currentLang].success;
            } catch (error) {
                progressText.textContent = "Error: " + error.message;
                progressText.classList.add('text-red-500');
                console.error(error);
            } finally {
                processBtn.disabled = false;
                processBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            }
        });
    </script>
</body>
</html>
