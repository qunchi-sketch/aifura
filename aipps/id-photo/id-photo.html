<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI 智能证件照 · 风格生成器 - Aifura</title>
  <meta name="description" content="上传照片，选择白/蓝/红底，生成证件照预览；输入兑换码解锁高清下载。提示：效果仅供参考。" />
  <meta name="robots" content="index,follow" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="AI 智能证件照 · 风格生成器" />
  <meta property="og:description" content="提示：效果仅供参考。上传照片 → 生成预览 → 兑换码解锁高清下载。" />
  <link rel="stylesheet" href="/aipps/id-photo/id-photo.css" />
</head>

<body>
  <header class="topbar">
    <div class="wrap topbar-inner">
      <div class="brand">
        <span class="brand-dot"></span>
        <span class="brand-text">Aifura</span>
      </div>
      <a class="toplink" href="/" target="_blank" rel="noopener">更多工具</a>
    </div>
  </header>

  <main class="wrap">
    <section class="hero">
      <h1 class="h1">
        <span>AI 智能证件照</span>
        <span class="h1-sub">风格生成器</span>
      </h1>
      <p class="hint">提示：效果仅供参考</p>
    </section>

    <section class="grid">
      <!-- Left: Upload + Controls -->
      <div class="card">
        <div class="card-title">上传照片</div>

        <div id="dropzone" class="dropzone" role="button" tabindex="0" aria-label="上传照片">
          <input id="fileInput" class="fileInput" type="file" accept="image/*" />
          <div class="dz-icon">⬆️</div>
          <div class="dz-text">
            <div class="dz-main">点击上传 / 拖拽图片到此处</div>
            <div class="dz-sub">建议：清晰正脸、无遮挡、自然光</div>
            <div class="dz-sub">文件 ≤ 15MB（HEIC 可能不兼容，建议先转 JPG）</div>
          </div>
        </div>

        <div class="controls">
          <div class="control">
            <div class="label">背景色</div>
            <div class="bgrow" id="bgRow">
              <button class="bgchip selected" data-bg="white" aria-label="白底">
                <span class="dot dot-white"></span><span>白</span>
              </button>
              <button class="bgchip" data-bg="blue" aria-label="蓝底">
                <span class="dot dot-blue"></span><span>蓝</span>
              </button>
              <button class="bgchip" data-bg="red" aria-label="红底">
                <span class="dot dot-red"></span><span>红</span>
              </button>
            </div>
            <div class="subtle">切换底色后请点击「生成」</div>
          </div>

          <div class="actions">
            <button id="btnGenerate" class="btn primary" disabled>生成证件照</button>
            <button id="btnReset" class="btn ghost" disabled>重新选择</button>
          </div>

          <div id="statusBar" class="status" hidden></div>
        </div>

        <div class="divider"></div>

        <div id="unlockBlock" class="unlock" hidden>
          <div class="card-title">解锁高清下载</div>

          <div class="field">
            <input id="keyInput" class="input" type="text" placeholder="请输入兑换码（如 AIFURA-XXXX-YYYY）" autocomplete="off" />
            <button id="btnCheckKey" class="btn" type="button">检查</button>
          </div>

          <div class="actions">
            <button id="btnRedeem" class="btn primary" disabled>解锁高清下载</button>
          </div>

          <div id="keyMsg" class="msg" hidden></div>

          <div class="subtle">
            兑换成功后请在 <b>10 分钟</b> 内下载（一次性/限次）。
          </div>
        </div>
      </div>

      <!-- Right: Preview -->
      <div class="card">
        <div class="card-title">预览</div>

        <div class="previewWrap">
          <div id="previewEmpty" class="previewEmpty">
            生成后将在此显示预览图
          </div>

          <div id="previewBox" class="previewBox" hidden>
            <div class="previewFrame">
              <img id="previewImg" alt="证件照预览" />
              <!-- 前端水印只是临时兜底；你后面会在后端做真正的低清+水印 -->
              <div class="wm">AIFURA · PREVIEW</div>
            </div>

            <div class="previewMeta">
              <div class="metaRow">
                <span class="pill">2:3</span>
                <span class="pill" id="pillBg">白底</span>
                <span class="pill warn">低清预览</span>
              </div>

              <div class="actions">
                <button id="btnRegen" class="btn" disabled>重新生成</button>
                <button id="btnDownload" class="btn primary" disabled>下载高清图</button>
              </div>

              <div id="wxTip" class="wxTip" hidden>
                微信内如无法下载：可 <b>长按图片保存</b>，或右上角「在浏览器打开」。
              </div>

              <div id="downloadFallback" class="downloadFallback" hidden>
                <div class="subtle">若下载被拦截，请长按下方图片保存：</div>
                <img id="hdInlineImg" alt="高清图（长按保存）" />
              </div>
            </div>
          </div>
        </div>

        <div class="divider"></div>

        <details class="faq">
          <summary>常见问题</summary>
          <div class="faq-body">
            <p><b>为什么预览有水印？</b> 预览用于确认效果，解锁后下载高清无水印。</p>
            <p><b>生成失败怎么办？</b> 可重试，建议更换更清晰的正脸照片。</p>
            <p><b>为什么微信下载失败？</b> 微信对下载行为可能有限制，可长按图片保存或在浏览器打开。</p>
          </div>
        </details>
      </div>
    </section>

    <footer class="footer">
      <span>Powered by Aifura</span>
    </footer>
  </main>

  <script type="module" src="/aipps/id-photo/id-photo.js"></script>
</body>
</html>
